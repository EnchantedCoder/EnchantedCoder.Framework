// The following code was generated by Microsoft Visual Studio 2005.
// The test owner should check each test for validity.
using Microsoft.VisualStudio.TestTools.UnitTesting;
using System;
using System.Text;
using System.Collections.Generic;
using Havit.BusinessLayerTest;
using Havit.Data;
using System.Data.Common;
using Havit.Business;

namespace Havit.BusinessTest
{
	/// <summary>
	/// This is a test class for Havit.Business.BusinessObjectBase and is intended
	/// to contain all Havit.Business.BusinessObjectBase Unit Tests
	/// </summary>
	[TestClass]
	public class BusinessObjectBaseTest : BusinessObjectBase // abychom došáhli na protected members
	{
		#region EqualsTest_StejneID
		/// <summary>
		/// Základní test na funkčnost Equals při stejných ID.
		/// </summary>
		[TestMethod]
		public void EqualsTest_StejneID()
		{
			Role role1 = Role.GetObject(-1);
			Role role2 = Role.GetObject(-1);

			Assert.IsTrue(role1.Equals(role2));
			Assert.IsTrue(role2.Equals(role1));
			Assert.IsTrue(role1 == role2);
			Assert.IsTrue(role2 == role1);
		}
		#endregion

		#region EqualsTest_RuzneID
		/// <summary>
		/// Základní test na funkčnost Equals při různých ID.
		/// </summary>
		[TestMethod]
		public void EqualsTest_RuzneID()
		{
			Role role1 = Role.GetObject(-1);
			Role role2 = Role.GetObject(1);

			Assert.IsFalse(role1.Equals(role2));
			Assert.IsFalse(role2.Equals(role1));
			Assert.IsFalse(role1 == role2);
			Assert.IsFalse(role2 == role1);
		}
		#endregion

		#region EqualsTest_Nove
		/// <summary>
		/// Základní test na funkčnost Equals na nové objekty.
		/// </summary>
		[TestMethod]
		public void EqualsTest_Nove()
		{
			Subjekt subjekt1 = Subjekt.CreateObject();
			Subjekt subjekt2 = Subjekt.CreateObject();
			Subjekt subjekt3 = subjekt1;

			Assert.IsFalse(subjekt1.Equals(subjekt2));
			Assert.IsFalse(subjekt1.Equals(subjekt2));
			Assert.IsFalse(subjekt1 == subjekt2);
			Assert.IsFalse(subjekt1 == subjekt2);

			Assert.IsTrue(subjekt1.Equals(subjekt3));
			Assert.IsTrue(subjekt1.Equals(subjekt3));
			Assert.IsTrue(subjekt1 == subjekt3);
			Assert.IsTrue(subjekt1 == subjekt3);
		}
		#endregion

		#region GetAllCacheClone
		/// <summary>
		/// Testuje, zda cachovaný GetAll vrací klon kolekce.
		/// </summary>
		[TestMethod]
		public void GetAllCacheClone()
		{
			RoleCollection roleCollection1 = Role.GetAll();
			RoleCollection roleCollection2 = Role.GetAll();
			Assert.IsTrue(roleCollection1 != roleCollection2);
		}
		#endregion

		#region GetObject_Neexistujici
		[TestMethod]
		[ExpectedException(typeof(InvalidOperationException))]
		public void GetObject_Neexistujici()
		{
			Role.GetObject(-999).Load();
		}
		#endregion

		#region TryLoad_Existujici
		/// <summary>
		/// Základní test na TryLoad existujícího objektu.
		/// </summary>
		[TestMethod]
		public void TryLoad_Existujici()
		{
			Role role = Role.GetObject(0);
			Assert.IsTrue(role.TryLoad());
			Assert.IsTrue(role.TryLoad());
		}
		#endregion

		#region TryLoad_Neexistujici
		/// <summary>
		/// Základní test na funkčnost TryLoad neexistujícího objektu.
		/// </summary>
		[TestMethod]
		public void TryLoad_Neexistujici()
		{
			Role role = Role.GetObject(999);
			Assert.IsFalse(role.TryLoad());
		}
		#endregion

		#region Save_MultipleSaveTest
		[TestMethod]
		public void Save_SaveAndDeleteTest()
		{
			int originalCount = Subjekt.GetAll().Count;
			Subjekt subjekt = Subjekt.CreateObject();
			subjekt.Nazev = "test";
			subjekt.Save();
			DbConnector.Default.ExecuteTransaction(delegate(DbTransaction transaction)
				{
					subjekt.Nazev = "test2";
					subjekt.Save(transaction);
					subjekt.Delete(transaction);
				});
			int newCount = Subjekt.GetAll().Count;
			Assert.AreEqual(originalCount, newCount);
		}
		
		#endregion

		#region CheckConstraintOnDeletedObject
		[TestMethod]
		public void CheckConstraintOnDeletedObject()
		{
			DbConnector.Default.ExecuteTransaction(delegate(DbTransaction transaction)
			{
				Subjekt subjekt = Subjekt.CreateObject();
				subjekt.Save(transaction);
				string s = "";
				while (s.Length <= Subjekt.Properties.Nazev.MaximumLength)
				{
					s = s + "0";
				}

				subjekt.Nazev = s;
				subjekt.Delete(transaction);
			});
		}
		
		#endregion		

		#region GetNullableID
		/// <summary>
		/// A test for GetNullableID
		/// </summary>
		[TestMethod]
		public void GetNullableIDTest_ID()
		{
			BusinessObjectBase businessObject = Role.ZaporneID;
			int? expected = Role.ZaporneID.ID;
			int? actual;
			actual = BusinessObjectBase.GetNullableID(businessObject);
		}

		/// <summary>
		/// A test for GetNullableID
		/// </summary>
		[TestMethod]
		public void GetNullableIDTest_Null()
		{
			BusinessObjectBase businessObject = null;
			int? expected = null;
			int? actual;
			actual = BusinessObjectBase.GetNullableID(businessObject);
			Assert.AreEqual(expected, actual);
		}
		#endregion

		#region FastIntParseTest
		/// <summary>
		/// A test for FastIntParseTest
		/// </summary>
		[TestMethod]
		public void FastIntParseTest()
		{
			Assert.AreEqual(BusinessObjectBase.FastIntParse("0"), 0);
			Assert.AreEqual(BusinessObjectBase.FastIntParse("1"), 1);
			Assert.AreEqual(BusinessObjectBase.FastIntParse("-1"), -1);
			Assert.AreEqual(BusinessObjectBase.FastIntParse("999999"), 999999);
			Assert.AreEqual(BusinessObjectBase.FastIntParse("-999999"), -999999);
			Assert.AreEqual(BusinessObjectBase.FastIntParse("123456789"), 123456789);
		}
		#endregion

		#region TryLoad_Perform, Save_Perform, Delete_Perform
		protected override bool TryLoad_Perform(DbTransaction transaction)
		{
			throw new NotImplementedException();
		}

		protected override void Save_Perform(DbTransaction transaction)
		{
			throw new NotImplementedException();
		}

		protected override void Delete_Perform(DbTransaction transaction)
		{
			throw new NotImplementedException();
		}
		#endregion
	}

}
